$(document).ready(function(){function e(e,a,o){food=o,food_selection="Location Quotient";var t=make_county_objects(food,food_selection);draw_map(a,t,food),top_list(t,food_selection,food),drag_and_drop(t,food),$("#switch-data").on("mousedown",".radio",function(){food_selection="";var e=$(this).attr("id");if("direct-farm"==e){food_selection="Direct Sale Farms";var o=make_county_objects(food,food_selection);$("#food-search").slideUp(200),clear_top_list(),draw_map(a,o,food),top_list(o,food_selection,food),$(".draggable").draggable({disabled:!1,stack:".draggable"})}else"food-switch"==e&&$("#food-search").slideDown(200)}),$("#switch-data").on("mouseover",".more-info",function(){var e=$(this).children(".tooltip");e.fadeIn(100)}),$("#switch-data").on("mouseout",".more-info",function(){var e=$(this).children(".tooltip");e.fadeOut(100)}),$("#top-list").on("click",".holdable",function(){el_id=$(this).attr("id"),el=d3.select("#"+el_id),id=county_id(el_id),county=find_county_obj(t,id),county_not_in_dock(county)&&(hold_county(county),held_status(county),$(".held").draggable({disabled:!0,stack:".draggable"}),map_html="#map #county-"+county.id,map_el=d3.select(map_html),map_el.classed({holdable:!1,held:!0}),map_el.style("fill","#3498DB"),$(".draggable").draggable({disabled:!1,stack:".draggable"}))}),$("#map-container").on("click",".holdable",function(){el_id=$(this).attr("id"),el=d3.select("#"+el_id),id=county_id(el_id),county=find_county_obj(t,id),county_not_in_dock(county)&&(hold_county(county),held_status(county),$(".held").draggable({disabled:!0,stack:".draggable"}),map_html="#map #county-"+county.id,map_el=d3.select(map_html),map_el.classed({holdable:!1,held:!0}),map_el.style("fill","#3498DB"),$(".draggable").draggable({disabled:!1,stack:".draggable"}))}),$("#held-counties").on("click",".removeable",function(){id=county_id($(this).attr("id")),county=find_county_obj(t,id),remove_county(county),$("#held-counties").find(".tooltip").remove(),chart_area=$(".drag-here#county-"+county.id),input_form=chart_area.prev().children("input"),input_form.val(""),reset_search_box(input_form),clear_chart_area($(chart_area)),reset_chart_area($(chart_area)),holdable_status(county),$(".holdable").draggable({disabled:!1,stack:".draggable"}),map_html="#map #county-"+county.id,map_el=d3.select(map_html),map_el.classed({held:!1,holdable:!0}),map_el.style("fill",function(e){return colorRating(t,county.food_quant)})}),$("#food-search").hide(),$("#food-search-box").on("keyup",function(e){if(13==e.which){food_selection=$(this).val();var o=make_county_objects(food,food_selection);clear_top_list(),top_list(o,food_selection,food),draw_map(a,o,food),$(".draggable").draggable({disabled:!1,stack:".draggable"})}}),$(".county-wrapper").on("keyup","input[type=search]",function(e){if(13==e.which){var a=$(this).parent().next();input_form=$(this),icon=input_form.next().children("i"),icon.removeClass("fa-search").addClass("fa-times-circle"),a.find("h4").fadeOut(100),new_placeholder=input_form.val(),input_form.attr("placeholder",new_placeholder),wanted={},t.forEach(function(e){return e.county+", "+e.state==new_placeholder&&(wanted=e),wanted}),dragged_foods=find_county_foods(food,wanted.id),dragged_food_names=get_food_names_list(wanted.id,dragged_foods),dragged_food_values=get_food_values_list(wanted.id,dragged_foods),a.attr("id","county-"+wanted.id),draw_chart(dragged_food_names,dragged_food_values,a),docked=$(removeable_county(wanted).addClass("disabled").removeClass("draggable")),$("#held-counties").append(docked),$(".disabled").draggable({disabled:!0,stack:".draggable"}),map_html="#map #county-"+wanted.id,map_el=d3.select(map_html),map_el.classed({holdable:!1,held:!0}),map_el.style("fill","#3498DB")}});var d=get_food_list();$("#food-search-box").autocomplete({source:d});var l=[];t.forEach(function(e){l.push(e.county+", "+e.state)}),$("#left-search-box").autocomplete({source:l}),$("#right-search-box").autocomplete({source:l}),$("input[type=search]").on("focusin",function(){$(this).attr("placeholder",""),$(this).attr("value",""),$($(this).next()).fadeOut(100)}),$("input[type=search]").on("focusout",function(){input_form=$(this),current_placeholder=input_form.attr("placeholder"),$("#food-search").slideUp(200),"county-search"==input_form.attr("name")?(drag_here=input_form.parent().next(),drag_here.has(".highcharts-container").length>0?(id=county_id(drag_here.attr("id")),county=find_county_obj(t,id),new_placeholder=county.county+", "+county.state,input_form.attr("placeholder",new_placeholder)):input_form.attr("placeholder","Search by county")):input_form.attr("placeholder","Search by food"),input_form.next().fadeIn(100)}),$(".input-icon i").on("click",function(){$(this).removeClass("fa-times-circle").addClass("fa-search"),chart_area=$(this).parent().parent().next(),input_form=$(this).parent().prev(),input_form.val(""),reset_search_box(input_form),icon=$(this),icon.removeClass("fa-times-circle").addClass("fa-search"),clear_chart_area($(chart_area)),reset_chart_area($(chart_area));var e=$(this).parent().parent().next().attr("id");console.log(e),$("#held-counties #"+e).removeClass("disabled").addClass("draggable"),$("#top-list #"+e).removeClass("disabled").removeClass("held").addClass("draggable").addClass("holdable"),$(".draggable").draggable({disabled:!1,stack:".draggable"})})}queue().defer(d3.json,"_json/us.json").defer(d3.json,"_data/dewmvpv1.json").await(e)});